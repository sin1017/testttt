import{r as u,o as d,c as _,a,w as S,v as w,b,F as H,d as P,e as p,t as v,f as V,g as q,p as T,h as U}from"./index.0a0d1aee.js";import{_ as I}from"./iconmonstr-magnifier-1-240.04f9bbcd.js";import{_ as L}from"./_plugin-vue_export-helper.cdc0426e.js";const h=c=>(T("data-v-e34aa241"),c=c(),U(),c),R={class:"container"},B={class:"input"},C=["onKeydown"],K={class:"employeePhoto"},F={class:"imgHome"},M=["src"],N=["onClick"],A={class:"employeeData"},$={class:"account"},j={class:"name"},z={class:"department"},G={class:"serviceStatus"},J=["onUpdate:modelValue"],O=h(()=>a("option",{disabled:"",value:""},"\u662F\u5426\u5728\u8077",-1)),Q=h(()=>a("option",null,"\u5728\u8077",-1)),W=h(()=>a("option",null,"\u96E2\u8077",-1)),X=[O,Q,W],Y={__name:"SearchEmployee",setup(c){let n=!1,m=0,f=!1;const o=u([]),i=u({text:""}),l=u("");function g(){n||(n=!0,!f&&p({method:"post",url:"/admin/getListUserData",data:{num:m}}).then(t=>{console.log(t.data.userData);for(let e=0;e<t.data.userData.length;e++)t.data.userData[e].profilePicture="data:image/png;base64,"+t.data.userData[e].profilePicture,t.data.userData[e].servicestatus===1?t.data.userData[e].servicestatus="\u5728\u8077":t.data.userData[e].servicestatus="\u96E2\u8077";o.value=o.value.concat(t.data.userData),m+=10,n=!1,t.data.userData.length<10&&(f=!0)}))}function x(){const t=l.value.scrollHeight,e=l.value.scrollTop||document.documentElement.scrollTop,s=l.value.clientHeight;t-e-s<50&&g()}const E=()=>{l.value.addEventListener("scroll",x,!1)},k=t=>{let e=0;o.value[t].servicestatus==="\u5728\u8077"?e=1:e=0,p.post("/admin/changedServiceStatus",{e_mail:o.value[t].e_mail,servicestatus:e}).then(s=>{console.log(s)}),alert("\u4FDD\u5B58\u6210\u529F")},y=()=>{p.post("/admin/queryUserData",{keyword:i.value.text}).then(t=>{console.log(t),o.value=t.data.queryResults;for(let e=0;e<o.value.length;e++)o.value[e].profilePicture="data:image/png;base64,"+o.value[e].profilePicture,t.data.queryResults[e].servicestatus===1?t.data.queryResults[e].servicestatus="\u5728\u8077":t.data.queryResults[e].servicestatus="\u96E2\u8077";console.log(o.value)})};return g(),(t,e)=>(d(),_("div",R,[a("div",B,[S(a("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>i.value.text=s),placeholder:"search",onKeydown:b(y,["enter"])},null,40,C),[[w,i.value.text]]),a("button",null,[a("img",{class:"magnifier",src:I,alt:"",onClick:y})])]),a("ul",{class:"mainView",ref_key:"scrollDistance",ref:l,onScroll:E},[(d(!0),_(H,null,P(o.value,(s,r)=>(d(),_("li",{key:r},[a("div",K,[a("div",F,[a("img",{src:s.profilePicture,alt:""},null,8,M)]),a("button",{onClick:D=>k(r)},"\u4FDD\u5B58",8,N)]),a("div",A,[a("div",$,"\u5E33\u865F\uFF1A"+v(s.e_mail),1),a("div",j,"\u59D3\u540D\uFF1A"+v(s.name),1),a("div",z,"\u90E8\u9580\uFF1A"+v(s.department),1),a("div",G,[V("\u5728\u8077\u72C0\u614B: "),S(a("select",{"onUpdate:modelValue":D=>s.servicestatus=D},X,8,J),[[q,s.servicestatus]])])])]))),128))],544)]))}},ae=L(Y,[["__scopeId","data-v-e34aa241"]]);export{ae as default};
