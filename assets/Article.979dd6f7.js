import{i as s,j as l,r as c,e as r}from"./index.0a0d1aee.js";import{_ as o}from"./iconmonstr-user-5-240.bf901f19.js";s();const p=l("text",{state:()=>({article:[],img:[],articleSearch:[],articleContent:c(""),key:"",loading:!1,switch:!1}),actions:{getArticleData(a){this.loading===!0||this.switch===!0||(this.loading=!0,r.post("/member/getListQuest",{article:a}).then(t=>{for(let e=0;e<t.data.questData.length;e++)t.data.questData[e].profilePicture==="preset"||t.data.questData[e].profilePicture===""?t.data.questData[e].profilePicture=o:t.data.questData[e].profilePicture="data: image / png; base64,"+t.data.questData[e].profilePicture;this.article===[]?this.article=t.data.questData:this.article=this.article.concat(t.data.questData),t.data.questData.length===0&&(this.switch=!0,console.log(a)),this.loading=!1}))},updatedArticleData(a,t){r.post("/member/postNewQuest",{title:a,text:t})},searchArticle(a){r.post("/member/queryQuest",{keyword:a}).then(t=>{for(let e=0;e<t.data.questData.length;e++)t.data.questData[e].profilePicture==="preset"||t.data.questData[e].profilePicture===""?t.data.questData[e].profilePicture=o:t.data.questData[e].profilePicture="data: image / png; base64,"+t.data.questData[e].profilePicture;this.articleSearch=t.data.questData})},browseArticles(a){localStorage.setItem("key",JSON.stringify(a.id)),r.post("/member/getQuestByid",{id:a.id}).then(t=>{this.key=JSON.parse(localStorage.getItem("key")),this.articleContent=t.data.questData,t.data.questData.profilePicture==="preset"||t.data.questData.profilePicture===""?this.articleContent.profilePicture=o:this.articleContent.profilePicture="data: image / png; base64,"+t.data.questData.profilePicture;let e=this.articleContent.message;for(let i=0;i<e.length;i++)e[i].profilePicture==="preset"||e[i].profilePicture===""?e[i].profilePicture=o:e[i].profilePicture="data: image / png; base64,"+e[i].profilePicture})},refreshWindow(a){console.log("\u5237\u65B0"),r.post("/member/getQuestByid",{id:a}).then(t=>{this.articleContent=t.data.questData,t.data.questData.profilePicture==="preset"||t.data.questData.profilePicture===""?this.articleContent.profilePicture=o:this.articleContent.profilePicture="data: image / png; base64,"+t.data.questData.profilePicture;let e=this.articleContent.message;for(let i=0;i<e.length;i++)e[i].profilePicture==="preset"||e[i].profilePicture===""?e[i].profilePicture=o:e[i].profilePicture="data: image / png; base64,"+e[i].profilePicture})},addMessage(a){console.log(a,"message"),r.post("/member/newComment",{questId:this.articleContent.id,content:a})},deleteArticle(a){console.log(a.id),console.log("\u6709\u57F7\u884C"),r.post("/member/delQuest",{id:a.id}).then(t=>{console.log(t)})}}});export{p as u};
